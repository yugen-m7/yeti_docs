{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"index.html","title":"Overview","text":"<p>The Yeti Industrial IoT Gateway is a robust, enterprise-ready device that bridges the gap between industrial equipment and modern cloud-based IoT platforms. Built for industrial environments, it provides secure, reliable connectivity with comprehensive monitoring and configuration capabilities.</p>"},{"location":"index.html#key-features","title":"Key Features","text":"<ul> <li>Multi-Protocol Support:    Works with multiple industrial communication standards (RS-485, RS-232, CAN)</li> <li>Flexible Connectivity:    Supports Wi-Fi, Ethernet, and BLE for configuration and data visualization.</li> <li>Robust Modbus Communication:    Handles both Modbus RTU and TCP simultaneously with up to 16 devices.</li> <li>Over-the-Air (OTA) Updates:   Manage and update gateway firmware remotely via the cloud.</li> <li>Remote Monitoring:    Real-time data visualization from anywhere using a dedicated Application Server.</li> </ul> <p>For more detail go to Feature</p>"},{"location":"index.html#quick-start-guide","title":"Quick Start Guide","text":"<p>Get your Yeti gateway up and running in minutes:</p> <ol> <li>Power On - Connect 12V DC jack power supply</li> <li>Connect - Access device WiFi access point or connect via Ethernet</li> <li>Login - Use credentials through captive portal interface</li> <li>Configure Network - Set up WiFi/Ethernet connectivity</li> <li>Add Devices - Configure your Modbus devices and register mappings</li> <li>Setup Modbus - Configure connection parameters (RTU/TCP)</li> <li>Cloud Integration - Set up ThingsBoard MQTT connection</li> <li>Apply &amp; Reboot - Save settings and restart to activate configuration</li> </ol> <p>For more detail go to Device Setup</p>"},{"location":"device_setup.html","title":"Device Setup","text":"<p>This document outlines the step-by-step process for setting up and configuring the Yeti Gateway, including network connection, Modbus configuration, and cloud integration.</p>"},{"location":"device_setup.html#prerequisites","title":"Prerequisites","text":"<ul> <li>A Yeti Gateway device</li> <li>The device's MAC address (specifically the last 4 digits)</li> <li>WiFi network credentials (SSID and Password)</li> <li>Cloud server credentials and certificate files</li> </ul>"},{"location":"device_setup.html#part-1-initial-connection-network-setup","title":"Part 1: Initial Connection &amp; Network Setup","text":"<ol> <li> <p>Connect to the Access Point</p> <ul> <li>Power on the Yeti Gateway.</li> <li>On your computer or mobile device, open your WiFi settings.</li> <li>Connect to the network named YETI-PRO-ACC.</li> <li>Captive Portal:<ul> <li>Ideally, a login page will open automatically.</li> <li>If it does not, open your WiFi settings for the connected network and select Manage Router (or open a browser and navigate to the gateway IP, typically 192.168.0.1).</li> </ul> </li> </ul> </li> <li> <p>Initial Login</p> <ul> <li>Log in to the local configuration page using the following credentials:     Username: yeti-pro-admin     Password: The last 4 digits of the device's MAC address.</li> </ul> </li> <li> <p>Configure WiFi</p> <ul> <li>Once logged in, navigate to the WiFi Settings page.</li> <li>Enter your local network's SSID and Password.</li> <li>IP Configuration:<ul> <li>Dynamic IP: Ensure the Use DHCP box is checked.</li> <li>Static IP: Uncheck Use DHCP and manually enter the IP Address, Gateway, and Netmask.</li> </ul> </li> <li>Click Save WiFi Settings.</li> <li>Click Restart to apply the changes.</li> </ul> </li> </ol>"},{"location":"device_setup.html#part-2-accessing-the-web-interface","title":"Part 2: Accessing the Web Interface","text":"<ul> <li>After the device restarts, it will be connected to your local network. You can now access it using its hostname rather than the direct access point.</li> <li>Connect your computer/phone to the same local network as the Yeti Gateway.</li> <li>Open a web browser and navigate to:<ul> <li>http://yeti-pro-{XXXX}.local</li> <li>(Replace {XXXX} with the last 4 digits of the device's MAC address)</li> </ul> </li> <li>Log in again using the same credentials:<ul> <li>Username: yeti-pro-admin</li> <li>Password: Last 4 digits of MAC address.</li> </ul> </li> </ul>"},{"location":"device_setup.html#part-3-modbus-configuration","title":"Part 3: Modbus Configuration","text":"<ol> <li> <p>Configure Connection Settings</p> <ul> <li>Navigate to the Connection tab.</li> <li>Configure the RTU Settings (Baudrate, Parity, Stop Bit, Data Bit).</li> <li>Note: These settings must match the settings of your connected Modbus devices.</li> <li>Click Save RTU Settings.</li> </ul> </li> <li> <p>Add Modbus Devices</p> <ul> <li>Navigate to the Modbus tab.</li> <li>Click on a device block (e.g., Device 1) to open its settings.</li> <li>Enter the Slave ID for the specific hardware you are connecting.</li> <li>Click Add Register to configure data points.</li> <li>Enter the register details:<ul> <li>Parameter Name</li> <li>Unit</li> <li>Register Address</li> <li>Data Type / Count</li> </ul> </li> <li>Click Add Register to save the specific data point.</li> <li>Repeat for all necessary registers.</li> <li>Click Back to Slave List.</li> <li>Finally, click Save Modbus Settings on the main Modbus page.</li> </ul> </li> </ol>"},{"location":"device_setup.html#part-4-cloud-configuration","title":"Part 4: Cloud Configuration","text":"<ol> <li> <p>Configure Server Settings</p> <ul> <li>Navigate to the Cloud tab.</li> <li>Enter the Server URL (e.g., mqtts://tb.example.com).</li> <li>Enter the Port (e.g., 8883).</li> <li>Select the QoS Level.</li> </ul> </li> <li> <p>Upload Certificates    You will need to copy and paste the content of your certificate files into the respective fields:</p> <ul> <li>Root CA Certificate (PEM)</li> <li>Device Certificate (PEM)</li> <li>Device Private Key (PEM)</li> </ul> </li> <li> <p>Save and Restart</p> <ul> <li>Click Save Cloud Settings.</li> <li>Click Restart in the top menu to apply the new cloud configuration.</li> </ul> </li> </ol>"},{"location":"device_setup.html#part-5-verification","title":"Part 5: Verification","text":"<ol> <li>To confirm the device is sending data:<ul> <li>Open a browser and navigate to the application server: <code>https://garud.cloud</code></li> <li>Log in with your user credentials.</li> <li>On the dashboard, locate your device in the Your Devices list.</li> <li>Click the device name to view the Live Telemetry Data.</li> <li>Data should update automatically (typically every 5 seconds).</li> <li>Setup Complete.</li> </ul> </li> </ol>"},{"location":"feature.html","title":"Features","text":""},{"location":"feature.html#robust-modbus-communication","title":"Robust Modbus Communication","text":"<p>Handles both Modbus RTU and TCP simultaneously with up to 16 devices. With read and write functionality directly from web portal.</p> <ul> <li>Multiple Simultaneous Connection Support </li> </ul>"},{"location":"feature.html#remote-logging","title":"Remote Logging","text":"<p>Yeti\u2019s Application Server <code>https://www.garud.cloud</code> provides secure remote access to your device data, allowing users to monitor and analyze real-time information from anywhere.</p> <ul> <li> <p>Dashboard   View live data from multiple devices simultaneously through a unified dashboard.   </p> </li> <li> <p>Graph   Visualize trends and patterns with intuitive real-time graphs.   </p> </li> <li> <p>Report   Generate detailed, timestamped reports for analysis, auditing, or record-keeping.   </p> </li> </ul>"},{"location":"hardware.html","title":"Hardware Specification","text":"<p>The Yeti Industrial IoT Gateway is built around the powerful Espressif ESP32-S3 System-on-Chip (SoC). This choice provides a robust foundation with a dual-core processor, ample memory, and a rich set of peripherals.</p>"},{"location":"hardware.html#key-components","title":"Key Components","text":"<ul> <li>SoC: Espressif ESP32-S3<ul> <li>CPU: Dual-core Xtensa\u00ae LX7 microprocessor</li> <li>Memory: Internal SRAM and ROM</li> <li>Wireless: Wi-Fi 802.11 b/g/n and Bluetooth 5 (LE)</li> </ul> </li> <li>Peripherals:<ul> <li>Ethernet: Wired connectivity via an external PHY.</li> <li>Temperature Sensor: On-board temperature monitoring.</li> <li>RS232/RS485: For serial communication with industrial devices.</li> <li>CAN Bus: Using the TWAI (Two-Wire Automotive Interface) controller for robust communication in noisy environments.</li> <li>GPIO, I2C, SPI: For connecting a wide range of sensors, displays, and other components.</li> <li>Buzzer: For audible user feedback.</li> </ul> </li> </ul>"},{"location":"hardware.html#connectivity","title":"Connectivity","text":"<p>The gateway is designed for versatile connectivity:</p> <ul> <li>Wired:<ul> <li>Ethernet (10/100 Mbps)</li> <li>RS232</li> <li>RS485 (for Modbus RTU)</li> <li>CAN Bus</li> </ul> </li> <li>Wireless:<ul> <li>Wi-Fi (Access Point and Station modes)</li> <li>Bluetooth Low Energy (BLE)</li> </ul> </li> </ul> <p>For detailed schematics, please refer to the <code>yeti-hardware/</code> directory.</p>"},{"location":"system_architecture.html","title":"System Architecture","text":"<p>The system operates through two primary workflows: Data Flow for normal operation and Configuration Flow for setup and maintenance.</p>"},{"location":"system_architecture.html#data-flow","title":"Data Flow","text":"<pre><code>flowchart LR\n    classDef block fill:#e5e5e5,stroke:#555,stroke-width:1px,color:#111;\n    classDef block0 fill:#d0d0d0,stroke:#555,stroke-width:2px,color:#111;\n\n    Sensors[\"Industrial Devices\"]:::block\n    Gateway[\"**Yeti Gateway**\"]:::block0\n    TB[\"ThingsBoard &lt;br&gt; Cloud Platform\"]:::block\n    App[\"Application Server\"]:::block\n\n    Sensors --&gt;|Data Acquisition| Gateway\n    Gateway --&gt;|Telemetry Upload| TB\n    TB --&gt;|Data Integration| App\n    TB --&gt;|Control Commands| Gateway</code></pre> <ol> <li> <p>Data Acquisition (Industrial Devices -&gt; Yeti Gateway)    The gateway polls connected industrial devices (e.g., Modbus) at configurable intervals and collects raw sensor data.</p> </li> <li> <p>Telemetry Ingestion (Yeti Gateway -&gt; ThingsBoard)    The gateway sends collected data to the cloud over MQTTS (MQTT over TLS/SSL), ensuring encrypted and reliable transmission.</p> </li> <li> <p>Data Integration (ThingsBoard -&gt; Application Server)    The Application Server retrieves real-time, aggregated, or processed data from ThingsBoard via its secure REST API for analytics, dashboards, and business logic.</p> </li> <li> <p>Control Commands (ThingsBoard -&gt; Yeti Gateway)    ThingsBoard enables remote management, including OTA firmware updates, configuration adjustments, and direct control commands sent back to the gateway.</p> </li> </ol>"},{"location":"system_architecture.html#configuration-flow","title":"Configuration Flow","text":"<pre><code>flowchart LR\n    classDef block fill:#e5e5e5,stroke:#555,stroke-width:1px,color:#111;\n    classDef block0 fill:#d0d0d0,stroke:#555,stroke-width:2px,color:#111;\n\n    %% Nodes\n    PC[\"User Device&lt;br&gt;(Phone/Laptop)\"]:::block\n    Gateway[\"**Yeti Gateway**\"]:::block0\n\n    %% Flows (top \u2192 middle \u2192 bottom)\n    PC --&gt;|Local Connection| Gateway\n    Gateway &lt;--&gt;|Parameter Configuration| PC</code></pre> <ol> <li> <p>Local Connection (User Device -&gt; Yeti Gateway)    The user device (phone or PC) temporarily connects to the Yeti Gateway\u2014typically via a local Wi-Fi access point (AP mode) or BLE\u2014to perform initial setup.</p> </li> <li> <p>Parameter Configuration (Yeti Gateway &lt;-&gt; User Device)    The user sends required configuration parameters (e.g., cloud credentials, device connection strings, polling intervals) to the gateway before deployment.</p> </li> </ol>"},{"location":"api/communication.html","title":"Other Communication Settings","text":""},{"location":"api/communication.html#rs232-communication-parameters","title":"RS232 Communication Parameters","text":"<p>Configure RS232 serial communication settings.</p>"},{"location":"api/communication.html#request","title":"Request","text":"<pre><code>POST /settings?rs232=1\nContent-Type: application/json\n</code></pre>"},{"location":"api/communication.html#request-body","title":"Request Body","text":"<pre><code>{\n    \"rs232\": {\n        \"baudrate\": 115200,\n        \"parity\": 0,\n        \"stop_bit\": 1,\n        \"data_bit\": 8,\n        \"response_timeout\": 1000\n    }\n}\n</code></pre> <p>Request Body Fields:</p> Field Type Description rs232 object RS232 communication parameters container <p>RS232 Object Fields:</p> Field Type Description baudrate integer Communication speed in bits per second parity integer Parity checking mode (0:None, 1:Even, 2:Odd) stop_bit integer Number of stop bits (1 or 2) data_bit integer Number of data bits per frame (5-8) response_timeout integer Response timeout in milliseconds"},{"location":"api/communication.html#response-messages","title":"Response Messages","text":"Status Message 200 \"Settings Saved\" 400 \"Invalid communication parameters\" 500 \"Failed to save RS232 settings\""},{"location":"api/communication.html#twai-can-communication-parameters","title":"TWAI (CAN) Communication Parameters","text":"<p>Configure TWAI (CAN bus) network communication settings.</p>"},{"location":"api/communication.html#request_1","title":"Request","text":"<pre><code>POST /settings?twai=1\nContent-Type: application/json\n</code></pre>"},{"location":"api/communication.html#request-body_1","title":"Request Body","text":"<pre><code>{\n    \"twai\": {\n        \"bitrate\": 250000\n    }\n}\n</code></pre> <p>Request Body Fields:</p> Field Type Description twai object TWAI communication parameters container <p>TWAI Object Fields:</p> Field Type Description bitrate integer Bit rate in bits per second (e.g., 25000, 50000, 100000, 125000, 250000, 500000, 800000, 1000000)"},{"location":"api/communication.html#response-messages_1","title":"Response Messages","text":"Status Message 200 \"Settings Saved\" 400 \"Invalid communication parameters\" 500 \"Failed to save TWAI settings\""},{"location":"api/modbus_connection.html","title":"Modbus Communication Settings","text":""},{"location":"api/modbus_connection.html#rtu-communication-parameters","title":"RTU Communication Parameters","text":"<p>Configure Modbus RTU serial communication settings.</p>"},{"location":"api/modbus_connection.html#request","title":"Request","text":"<pre><code>POST /settings?mb_rtu=1\nContent-Type: application/json\n</code></pre>"},{"location":"api/modbus_connection.html#request-body","title":"Request Body","text":"<pre><code>{\n    \"rtu\": {\n        \"baudrate\": 9600,\n        \"parity\": 1,\n        \"stop_bit\": 1,\n        \"data_bit\": 8,\n        \"response_timeout\": 1000\n    }\n}\n</code></pre> <p>Request Body Fields:</p> Field Type Description connection object RTU communication parameters container <p>Connection Object Fields:</p> Field Type Description baudrate integer Communication speed in bits per second parity integer Parity checking mode stop_bit integer Number of stop bits data_bit integer Number of data bits per frame rtu_response_timeout integer Response timeout in milliseconds"},{"location":"api/modbus_connection.html#response-messages","title":"Response Messages","text":"Status Message 200 \"RTU settings saved successfully!\" 400 \"Invalid communication parameters\" 500 \"Failed to save RTU settings\""},{"location":"api/modbus_connection.html#tcp-communication-parameters","title":"TCP Communication Parameters","text":"<p>Configure Modbus TCP network communication settings.</p>"},{"location":"api/modbus_connection.html#request_1","title":"Request","text":"<pre><code>POST /settings?mb_tcp=1\nContent-Type: application/json\n</code></pre>"},{"location":"api/modbus_connection.html#request-body_1","title":"Request Body","text":"<pre><code>{\n    \"tcp\": {\n        \"port\": 502,\n        \"ipType\": 0,\n        \"response_timeout\": 1000\n    }\n}\n</code></pre> <p>Request Body Fields:</p> Field Type Description connection object TCP communication parameters container <p>Connection Object Fields:</p> Field Type Description port integer TCP port number for Modbus communication ipType integer IP version type(0=IPv4, 1=IPv6) tcp_response_timeout integer Response timeout in milliseconds"},{"location":"api/modbus_connection.html#response-messages_1","title":"Response Messages","text":"Status Message 200 \"TCP settings saved successfully!\" 400 \"Invalid communication parameters\" 500 \"Failed to save TCP settings\""},{"location":"api/modbus_devices.html","title":"Modbus Device Management","text":""},{"location":"api/modbus_devices.html#configure-devices-and-registers","title":"Configure Devices and Registers","text":"<p>Configure up to 16 Modbus devices with their data registers.</p>"},{"location":"api/modbus_devices.html#request","title":"Request","text":"<pre><code>POST /settings?modbus=1\nContent-Type: application/json\n</code></pre>"},{"location":"api/modbus_devices.html#request-body","title":"Request Body","text":"<pre><code>{\n    \"devices\": [\n        {\n            \"sn\": 1,\n            \"name\": \"Energy_Meter_Main\",\n            \"mode\": 1,\n            \"id\": 1,\n            \"ip\": \"192.168.1.201\",\n            \"port\": 502\n        },\n        {\n            \"sn\": 2,\n            \"name\": \"VFD_Motor_01\",\n            \"mode\": 0,\n            \"id\": 2\n        }\n    ],\n    \"registers\": [\n        {\n            \"sn\": 1,\n            \"key\": \"ActivePower\",\n            \"unit\": \"kW\",\n            \"start\": 0,\n            \"scale\": 100,\n            \"mb\": 1,\n            \"type\": 4\n        },\n        {\n            \"sn\": 2,\n            \"key\": \"MotorSpeed\",\n            \"unit\": \"RPM\",\n            \"start\": 8192,\n            \"scale\": 1,\n            \"mb\": 1,\n            \"type\": 2\n        }\n    ]\n}\n</code></pre> <p>Request Body Fields:</p> Field Type Description devices array Array of device configuration objects registers array Array of register configuration objects <p>Device Object Fields:</p> Field Type Description sn integer Serial number/device slot identifier name string Device identifier name mode integer Connection type (0=RTU, 1=TCP) id integer Modbus slave address ip string IP address (TCP mode only) port integer TCP port (TCP mode only) <p>Register Object Fields:</p> Field Type Description sn integer Device serial number (must match device sn) key string Parameter name identifier unit string Engineering units start integer Starting register address scale number Scale factor for value conversion mb integer Modbus register type (see References) type integer Parameter data type (see References) <p>Important</p> <p>The API uses mode field (0/1) while the web interface displays this as type (RTU/TCP).</p>"},{"location":"api/modbus_devices.html#references","title":"References","text":""},{"location":"api/modbus_devices.html#modbus-register-types","title":"Modbus Register Types","text":"Value Type Description Access 1 Holding Registers Read/Write registers Read/Write 2 Input Registers Read-only input data Read-only 3 Coils Digital output bits Read/Write 4 Discrete Inputs Digital input bits Read-only"},{"location":"api/modbus_devices.html#parameter-data-types","title":"Parameter Data Types","text":"Value Type Description 1 Unsigned Integer 8 Bit 0-255 2 Unsigned Integer 16 Bit 0-65535 3 Unsigned Integer 32 Bit 0-4294967295 4 Float IEEE 754 32-bit float 5 ASCII Text string 6 BIN Binary data 7 Signed Integer 8 Bit (High Byte) -128 to 127 8 Signed Integer 8 Bit (Low Byte) -128 to 127 9 Unsigned Integer 8 Bit (High Byte) 0-255 10 Unsigned Integer 8 Bit (Low Byte) 0-255 11 Signed Integer 16 Bit Big Endian -32768 to 32767 12 Signed Integer 16 Bit Little Endian -32768 to 32767 13 Unsigned Integer 16 Bit Big Endian 0-65535 14 Unsigned Integer 16 Bit Little Endian 0-65535 15 Signed Integer 32 Bit Big Endian (ABCD) -2147483648 to 2147483647 16 Signed Integer 32 Bit Big Endian (CDAB) -2147483648 to 2147483647 17 Signed Integer 32 Bit Little Endian (BADC) -2147483648 to 2147483647 18 Signed Integer 32 Bit Little Endian (DCBA) -2147483648 to 2147483647 19 Unsigned Integer 32 Bit Big Endian (ABCD) 0-4294967295 20 Unsigned Integer 32 Bit Big Endian (CDAB) 0-4294967295 21 Unsigned Integer 32 Bit Little Endian (BADC) 0-4294967295 22 Unsigned Integer 32 Bit Little Endian (DCBA) 0-4294967295 23 Float Big Endian (ABCD) IEEE 754 32-bit float 24 Float Big Endian (CDAB) IEEE 754 32-bit float 25 Float Little Endian (BADC) IEEE 754 32-bit float 26 Float Little Endian (DCBA) IEEE 754 32-bit float"},{"location":"api/modbus_devices.html#response-messages","title":"Response Messages","text":"Status Message 200 \"Modbus settings saved successfully!\" 400 \"Invalid device configuration\" 409 \"Duplicate slave ID detected\""},{"location":"api/network.html","title":"Network Configuration","text":""},{"location":"api/network.html#wifi-network-settings","title":"WiFi Network Settings","text":"<p>Configure WiFi connection parameters and IP settings.</p>"},{"location":"api/network.html#request","title":"Request","text":"<pre><code>POST /settings?wifi=1\nContent-Type: application/json\n</code></pre>"},{"location":"api/network.html#request-body","title":"Request Body","text":"<pre><code>{\n    \"ssid\": \"PLANT_NETWORK\",\n    \"pass\": \"wifi_password123\",\n    \"wifi_dhcp\": true,\n    \"wifi_ip\": \"192.168.50.100\",\n    \"wifi_gw\": \"192.168.50.1\",\n    \"wifi_nm\": \"255.255.255.0\"\n}\n</code></pre> <p>Request Body Fields:</p> Field Type Description ssid string WiFi network name pass string WiFi password wifi_dhcp boolean Enable DHCP (true) or static IP (false) wifi_ip string Static IP address (required if wifi_dhcp=false) wifi_gw string Gateway IP address (required if wifi_dhcp=false) wifi_nm string Subnet mask (required if wifi_dhcp=false)"},{"location":"api/network.html#response-messages","title":"Response Messages","text":"Status Message 200 \"WiFi settings saved successfully!\" 400 \"Invalid IP address format\" 500 \"Failed to save WiFi settings\""},{"location":"api/network.html#ethernet-network-settings","title":"Ethernet Network Settings","text":"<p>Configure Ethernet interface IP settings.</p>"},{"location":"api/network.html#request_1","title":"Request","text":"<pre><code>POST /settings?ethernet=1\nContent-Type: application/json\n</code></pre>"},{"location":"api/network.html#request-body_1","title":"Request Body","text":"<pre><code>{\n    \"eth_dhcp\": false,\n    \"eth_ip\": \"10.0.1.50\",\n    \"eth_gw\": \"10.0.1.1\",\n    \"eth_nm\": \"255.255.255.0\"\n}\n</code></pre> <p>Request Body Fields:</p> Field Type Description eth_dhcp boolean Enable DHCP (true) or static IP (false) eth_ip string Static IP address (required if eth_dhcp=false) eth_gw string Gateway IP address (required if eth_dhcp=false) eth_nm string Subnet mask (required if eth_dhcp=false)"},{"location":"api/network.html#response-messages_1","title":"Response Messages","text":"Status Message 200 \"Ethernet settings saved successfully!\" 400 \"Invalid IP address format\" 500 \"Failed to save Ethernet settings\""},{"location":"api/network.html#mdns-configuration","title":"mDNS Configuration","text":"<p>Configure network discovery hostname.</p>"},{"location":"api/network.html#request_2","title":"Request","text":"<pre><code>POST /settings?mdns=1\nContent-Type: application/json\n</code></pre>"},{"location":"api/network.html#request-body_2","title":"Request Body","text":"<pre><code>{\n    \"mdns_host\": \"yeti-pro-accc\"\n}\n</code></pre> <p>Request Body Fields:</p> Field Type Description mdns_host string mDNS hostname for network discovery"},{"location":"api/network.html#response-messages_2","title":"Response Messages","text":"Status Message 200 \"mDNS settings saved successfully!\" 400 \"Invalid hostname format\" 500 \"Failed to save mDNS settings\""},{"location":"api/populate.html","title":"Populate","text":"<p>Verify session validity and populate configuration on web portal.</p>"},{"location":"api/populate.html#request","title":"Request","text":"<pre><code>GET /status\n</code></pre>"},{"location":"api/populate.html#response","title":"Response","text":"<p>Returns the complete device configuration object:</p> <pre><code>{\n    \"mdns_host\": \"yeti-device.local\",\n    \"ssid\": \"NETWORK_NAME\",\n    \"pass\": \"wifi_password\",\n    \"wifi_dhcp\": true,\n    \"wifi_ip\": \"192.168.1.100\",\n    \"wifi_gw\": \"192.168.1.1\",\n    \"wifi_nm\": \"255.255.255.0\",\n    \"eth_dhcp\": false,\n    \"eth_ip\": \"10.0.1.50\",\n    \"eth_gw\": \"10.0.1.1\",\n    \"eth_nm\": \"255.255.255.0\",\n    \"tb_uri\": \"mqtts://152.42.209.180\",\n    \"tb_port\": 8883,\n    \"tb_qos\": 1,\n    \"tb_root_ca\": \"-----BEGIN CERTIFICATE-----\\\\n...\\\\n-----END CERTIFICATE-----\",\n    \"tb_device_cert\": \"-----BEGIN CERTIFICATE-----\\\\n...\\\\n-----END CERTIFICATE-----\",\n    \"tb_device_key\": \"-----BEGIN PRIVATE KEY-----\\\\n...\\\\n-----END PRIVATE KEY-----\",\n    \"rtu\": {\n        \"baudrate\": 9600,\n        \"data_bit\": 8,\n        \"stop_bit\": 1,\n        \"parity\": 1,\n        \"response_timeout\": 1000\n    },\n    \"tcp\": {\n        \"port\": 502,\n        \"ipType\": 0,\n        \"response_timeout\": 1000\n    },\n    \"devices\": [\n        {\n            \"sn\": 1,\n            \"name\": \"Energy_Meter_Main\",\n            \"mode\": 0,\n            \"id\": 1,\n            \"ip\": \"192.168.1.201\",\n            \"port\": 502\n        }\n    ],\n    \"registers\": [\n        {\n            \"sn\": 1,\n            \"key\": \"ActivePower\",\n            \"unit\": \"kW\",\n            \"start\": 0,\n            \"scale\": 100,\n            \"mb\": 1,\n            \"type\": 4\n        }\n    ]\n}\n</code></pre>"},{"location":"api/populate.html#device-restart","title":"Device Restart","text":"<p>Restart the IoT gateway device.</p>"},{"location":"api/populate.html#request_1","title":"Request","text":"<pre><code>GET /reboot\n</code></pre>"},{"location":"api/populate.html#response-messages","title":"Response Messages","text":"Status Message 200 \"Device is restarting\" <p>Important</p> <p>Connection will be lost during restart. Allow around 30 seconds for device to fully restart.</p>"},{"location":"api/response.html","title":"API Response Reference","text":""},{"location":"api/response.html#http-status-codes","title":"HTTP Status Codes","text":"Code Meaning Description 200 OK Request processed successfully 400 Bad Request Invalid request format or parameters 401 Unauthorized Authentication required or session expired 404 Not Found Endpoint does not exist 409 Conflict Resource conflict (e.g., duplicate slave ID) 500 Internal Server Error Server-side processing error"},{"location":"api/response.html#common-success-messages","title":"Common Success Messages","text":""},{"location":"api/response.html#network-configuration","title":"Network Configuration","text":"<ul> <li>\"WiFi settings saved successfully!\"</li> <li>\"Ethernet settings saved successfully!\"</li> <li>\"mDNS settings saved successfully!\"</li> </ul>"},{"location":"api/response.html#communication-settings","title":"Communication Settings","text":"<ul> <li>\"RTU settings saved successfully!\"</li> <li>\"TCP settings saved successfully!\"</li> </ul>"},{"location":"api/response.html#device-management","title":"Device Management","text":"<ul> <li>\"Modbus settings saved successfully!\"</li> </ul>"},{"location":"api/response.html#cloud-integration","title":"Cloud Integration","text":"<ul> <li>\"Cloud settings saved successfully!\"</li> </ul>"},{"location":"api/response.html#user-management","title":"User Management","text":"<ul> <li>\"User settings updated successfully!\"</li> </ul>"},{"location":"api/response.html#common-error-messages","title":"Common Error Messages","text":""},{"location":"api/response.html#network-configuration-errors","title":"Network Configuration Errors","text":"<ul> <li>\"Invalid IP address format\"</li> <li>\"Please enter valid IP addresses for WiFi/Ethernet\"</li> <li>\"Invalid hostname format\"</li> </ul>"},{"location":"api/response.html#communication-errors","title":"Communication Errors","text":"<ul> <li>\"Invalid communication parameters\"</li> <li>\"Response timeout must be between 100-2000 ms\"</li> <li>\"Port must be a number between 1 and 65535\"</li> </ul>"},{"location":"api/response.html#device-configuration-errors","title":"Device Configuration Errors","text":"<ul> <li>\"Duplicate slave ID detected\"</li> <li>\"Invalid device configuration\"</li> <li>\"Slave ID must be a number between 0 and 255\"</li> <li>\"Please configure a valid Slave ID before adding registers\"</li> <li>\"Param Name must be 1 to 25 characters (quotes not allowed)\"</li> </ul>"},{"location":"api/response.html#certificate-errors","title":"Certificate Errors","text":"<ul> <li>\"Invalid certificate format\"</li> <li>\"Root CA must be a valid PEM certificate\"</li> <li>\"Device certificate must be a valid PEM certificate\"</li> <li>\"Private key must be a valid PEM private key\"</li> </ul>"},{"location":"api/response.html#authentication-errors","title":"Authentication Errors","text":"<ul> <li>\"Invalid credentials\"</li> <li>\"Password validation failed\"</li> <li>\"Current password incorrect\"</li> </ul>"},{"location":"api/session.html","title":"Session Management","text":""},{"location":"api/session.html#user-login","title":"User Login","text":"<p>Authenticate user for device configuration access.</p>"},{"location":"api/session.html#request","title":"Request","text":"<pre><code>POST /login\nContent-Type: application/json\n</code></pre>"},{"location":"api/session.html#request-body","title":"Request Body","text":"<pre><code>{\n    \"username\": \"yeti-pro-admin\",\n    \"password\": \"accc\"\n}\n</code></pre> <p>Request Body Fields:</p> Field Type Description username string User login name for authentication password string User password for authentication"},{"location":"api/session.html#response-messages","title":"Response Messages","text":"Status Response Description 200 Redirect to dashboard Authentication successful 401 Error message in UI Invalid credentials 500 Error message in UI Server error"},{"location":"api/session.html#user-logout","title":"User Logout","text":"<p>Terminate session and clear authentication.</p>"},{"location":"api/session.html#request_1","title":"Request","text":"<pre><code>POST /logout\n</code></pre>"},{"location":"api/session.html#response-messages_1","title":"Response Messages","text":"Status Action 200 Redirect to login page"},{"location":"api/thingsboard_data.html","title":"ThingsBoard MQTT Data Publishing","text":""},{"location":"api/thingsboard_data.html#modbus-data-publishing","title":"Modbus Data Publishing","text":""},{"location":"api/thingsboard_data.html#device-attributes","title":"Device Attributes","text":"<p>Modbus register information is published to:</p> <ul> <li>Topic: <code>v1/devices/me/attributes</code></li> <li>Purpose: Sends register configuration metadata</li> <li>Data Format:</li> </ul> <pre><code>{\n    \"mb_attr\": [\n        {\n            \"sid\": 1,\n            \"name\": \"Device 00\",\n            \"data\": [\n                {\n                    \"cid\": 0,\n                    \"name\": \"voltage\",\n                    \"unit\": \"volt\"\n                },\n                {\n                    \"cid\": 1,\n                    \"name\": \"light\",\n                    \"unit\": \"\"\n                }\n            ]\n        },\n        {\n            \"sid\": 2,\n            \"name\": \"Device 01\",\n            \"data\": [\n                {\n                    \"cid\": 2,\n                    \"name\": \"current\",\n                    \"unit\": \"amp\"\n                }\n            ]\n        }\n    ]\n}\n</code></pre> <p>Request Body Fields:</p> Field Type Description mb_attr array Array of slave device attribute objects <p>Slave Attribute Object Fields:</p> Field Type Description sid integer Slave ID - identifies the Modbus slave device name string Human-readable name for the slave device data array Array of register attribute objects for this slave <p>Register Attribute Object Fields (within <code>data</code> array):</p> Field Type Description cid integer Channel ID - identifies the specific register/channel name string Human-readable name for the register unit string Unit of measurement for the value"},{"location":"api/thingsboard_data.html#device-telemetry","title":"Device Telemetry","text":"<p>Real-time Modbus data readings are published to:</p> <ul> <li>Topic: <code>v1/devices/me/telemetry</code></li> <li>Purpose: Sends live sensor data values</li> <li>Data Format:</li> </ul> <pre><code>{\n    \"sid\": 1,\n    \"data\": [\n        {\n            \"cid\": 0,\n            \"value\": 212.03158569335938\n        },\n        {\n            \"cid\": 1,\n            \"value\": 1\n        }\n    ]\n}\n</code></pre> <p>Request Body Fields:</p> Field Type Description sid integer Slave ID - identifies the Modbus slave device data array Array of telemetry data objects <p>Data Object Fields:</p> Field Type Description cid integer Channel ID - identifies the specific register/channel value number Current reading value from the Modbus register"},{"location":"api/thingsboard_data.html#rpc-data-publishing","title":"RPC Data Publishing","text":""},{"location":"api/thingsboard_data.html#rpc-attributes","title":"RPC Attributes","text":"<p>Device system information published via RPC to attributes:</p> <ul> <li>Topic: <code>v1/devices/me/attributes</code> (via RPC)</li> <li>Purpose: Sends device configuration and system information</li> <li>Data Format:</li> </ul> <pre><code>{\n    \"idf_target\": \"esp32s3\"\n}\n</code></pre> <p>Fields:</p> Field Type Description idf_target string ESP-IDF target platform identifier"},{"location":"api/thingsboard_data.html#rpc-telemetry","title":"RPC Telemetry","text":"<p>Device system metrics published via RPC to telemetry:</p> <ul> <li>Topic: <code>v1/devices/me/telemetry</code> (via RPC)</li> <li>Purpose: Sends real-time system performance data</li> <li>Data Format:</li> </ul> <pre><code>{\n    \"dev_temp\": 37.700000762939453,\n    \"free_heap\": 130060,\n    \"up_time\": 14\n}\n</code></pre> <p>Fields:</p> Field Type Description dev_temp number Device temperature in Celsius free_heap integer Available heap memory in bytes up_time integer Device uptime in seconds"},{"location":"api/thingsboard_data.html#references","title":"References","text":""},{"location":"api/thingsboard_data.html#mqtt-quality-of-service-levels","title":"MQTT Quality of Service Levels","text":"QoS Description 0 At most once delivery 1 At least once delivery 2 Exactly once delivery"},{"location":"api/thingsboard_setup.html","title":"ThingsBoard Cloud Integration","text":""},{"location":"api/thingsboard_setup.html#mqtt-connection-setup","title":"MQTT Connection Setup","text":"<p>Configure a secure MQTT connection to the ThingsBoard cloud platform.</p>"},{"location":"api/thingsboard_setup.html#request","title":"Request","text":"<pre><code>POST /settings?thingsboard=1\nContent-Type: application/json\n</code></pre>"},{"location":"api/thingsboard_setup.html#request-body","title":"Request Body","text":"<pre><code>{\n    \"tb_uri\": \"mqtts://152.42.209.180\",\n    \"tb_port\": 8883,\n    \"tb_qos\": 1,\n    \"tb_root_ca\": \"-----BEGIN CERTIFICATE-----\\nMIIDQTCCAimgAwIBAgI...\\n-----END CERTIFICATE-----\",\n    \"tb_device_cert\": \"-----BEGIN CERTIFICATE-----\\nMIIDWjCCAkKgAwIBAgI...\\n-----END CERTIFICATE-----\",\n    \"tb_device_key\": \"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG...\\n-----END PRIVATE KEY-----\"\n}\n</code></pre> <p>Request Body Fields:</p> Field Type Description tb_uri string MQTT broker URI tb_port integer MQTT port for secure connection tb_qos integer Quality of Service level tb_root_ca string Root CA certificate in PEM format tb_device_cert string Device certificate in PEM format tb_device_key string Device private key in PEM format"},{"location":"api/thingsboard_setup.html#response-messages","title":"Response Messages","text":"Status Message 200 \"Cloud settings saved successfully!\" 400 \"Invalid certificate format\" 500 \"Failed to save ThingsBoard settings\""},{"location":"api/user.html","title":"User Account Management","text":""},{"location":"api/user.html#update-user-credentials","title":"Update User Credentials","text":"<p>Change username and password for device access.</p>"},{"location":"api/user.html#request","title":"Request","text":"<pre><code>POST /settings?user=1\nContent-Type: application/json\n</code></pre>"},{"location":"api/user.html#request-body","title":"Request Body","text":"<pre><code>{\n    \"newUsername\": \"yeti-pro-admin\",\n    \"oldPassword\": \"accc\",\n    \"newPassword\": \"NewSecurePass123!\"\n}\n</code></pre> <p>Request Body Fields:</p> Field Type Description newUsername string New login username for device access oldPassword string Current password for verification newPassword string New password to set"},{"location":"api/user.html#response-messages","title":"Response Messages","text":"Status Message 200 \"User settings updated successfully!\" 400 \"Password validation failed\" 401 \"Current password incorrect\""},{"location":"development/coding_guidelines.html","title":"Yeti Project Coding Guidelines","text":"<p>This document provides a comprehensive guide for developers contributing to the Yeti project. Adhering to these guidelines is crucial for maintaining code quality, consistency, and readability.</p>"},{"location":"development/coding_guidelines.html#1-onboarding-first-steps","title":"1. Onboarding: First Steps","text":"<p>Welcome to the team! Before writing any code, please familiarize yourself with the following:</p> <ol> <li>Read the <code>README.md</code>: This provides a high-level overview of the project's purpose, features, and core technologies (ESP32-S3, ESP-IDF).</li> <li>Understand the Architecture: The project is highly modular. Explore the <code>components/</code> directory to understand the different services and drivers that make up the system.</li> <li>Review <code>main/main.c</code>: This file is the application's entry point (<code>app_main</code>). It shows the initialization sequence and how all the modules are brought together.</li> </ol>"},{"location":"development/coding_guidelines.html#2-core-technology-and-structure","title":"2. Core Technology and Structure","text":"<ul> <li>Framework: The project is built using the ESP-IDF (v5.5.1) framework. All code is written in C.</li> <li>Build System: We use CMake as the build system, configured by the <code>CMakeLists.txt</code> files in the project root and each component.</li> <li>Modular Architecture: The project's functionality is broken down into self-contained modules located in <code>components/</code>.<ul> <li>Each module is prefixed with <code>yeti-</code> (e.g., <code>yeti-wifi</code>, <code>yeti-mqtt</code>).</li> <li>Each module should have a clear, single responsibility.</li> <li>The <code>main/main.c</code> file orchestrates the initialization and interaction of these modules.</li> </ul> </li> </ul>"},{"location":"development/coding_guidelines.html#3-coding-style-and-formatting","title":"3. Coding Style and Formatting","text":"<p>This is non-negotiable. We enforce a strict and consistent coding style across the entire project.</p> <ul> <li>Automated Formatting: All code is formatted using <code>.clang-format</code>, which is based on the LLVM style.</li> <li>Key Style Rules:<ul> <li>Indentation: 4 spaces. No tabs.</li> <li>Brace Style: Allman (\"egyptian brackets\") for control statements.     <pre><code>if (condition)\n{\n    // ...\n}\nelse\n{\n    // ...\n}\n</code></pre></li> <li>Pointers: The <code>*</code> should be adjacent to the variable name: <code>int *ptr;</code></li> </ul> </li> <li>Action Required: Configure your IDE or editor to automatically format on save using the project's <code>.clang-format</code> file. This prevents formatting inconsistencies.</li> </ul>"},{"location":"development/coding_guidelines.html#4-project-conventions","title":"4. Project Conventions","text":""},{"location":"development/coding_guidelines.html#custom-abstractions-very-important","title":"Custom Abstractions (Very Important)","text":"<p>We use our own custom wrappers and abstractions over standard ESP-IDF functions. You must use these project-specific APIs. They provide consistency, enhanced features, and easier maintenance.</p> <ul> <li>Logging: Do not use <code>printf</code> or <code>ESP_LOG</code>. Use the custom logging macros from <code>yeti-log.h</code>.<ul> <li><code>YETI_LOGI(tag, \"Information message: %d\", value);</code></li> <li><code>YETI_LOGW(tag, \"Warning message\");</code></li> <li><code>YETI_LOGE(tag, \"Error message\");</code></li> <li>These macros are color-coded and will integrate with future remote logging features.</li> </ul> </li> </ul>"},{"location":"development/coding_guidelines.html#naming-conventions","title":"Naming Conventions","text":"<ul> <li>Variables &amp; Functions: <code>snake_case</code> (e.g., <code>my_variable</code>, <code>process_data</code>).</li> <li>Macros &amp; Constants: <code>UPPER_SNAKE_CASE</code> (e.g., <code>MAX_BUFFER_SIZE</code>).</li> <li>Structs, Enums, Typedefs: <code>PascalCase</code> or a <code>_t</code> suffix (e.g., <code>WifiConfig</code>, <code>system_state_t</code>). Follow the convention in the module you are working on.</li> </ul>"},{"location":"development/coding_guidelines.html#error-handling","title":"Error Handling","text":"<ul> <li>Functions that can fail must return an <code>esp_err_t</code>.</li> <li>Check the return value of every function that returns an error code.</li> <li>Use the <code>ESP_OK</code> value to check for success.</li> </ul>"},{"location":"development/coding_guidelines.html#5-configuration-and-dependencies","title":"5. Configuration and Dependencies","text":"<ul> <li>Feature Management: Project features are enabled or disabled using Kconfig. You can see this in <code>main.c</code> with <code>#ifdef</code> blocks (e.g., <code>#ifdef CONFIG_YETI_USE_BLE</code>). To change the configuration, run <code>idf.py menuconfig</code>.</li> <li>External Libraries: Third-party dependencies (e.g., <code>esp-modbus</code>) are managed by the ESP-IDF Component Manager.<ul> <li>Dependencies are declared in <code>idf_component.yml</code> files.</li> <li>The <code>dependencies.lock</code> file tracks the exact versions used. Do not modify this file manually.</li> </ul> </li> </ul>"},{"location":"development/coding_guidelines.html#6-documentation","title":"6. Documentation","text":"<ul> <li>Doxygen: Public functions, structs, enums, and file headers must be documented using Doxygen-style comments. This is essential for generating API documentation.     <pre><code>/**\n * @brief Initializes the WiFi module.\n *\n * This function sets up the WiFi station or AP based on Kconfig settings.\n *\n * @return ESP_OK on success, or an error code on failure.\n */\nesp_err_t yeti_wifi_init(void);\n</code></pre></li> </ul>"},{"location":"development/coding_guidelines.html#7-version-control-git","title":"7. Version Control (Git)","text":"<ul> <li>Branching: Create a new feature branch from <code>main</code> for any new development or bug fix (e.g., <code>feature/new-sensor</code> or <code>fix/login-bug</code>).</li> <li>Commit Messages: Write clear, descriptive commit messages.<ul> <li>Subject: A concise summary (&lt;=50 chars).</li> <li>Body: Explain the what and why of the change (wrap at 72 chars).</li> </ul> </li> <li>Pull Requests: All changes must be submitted as a Pull Request (PR) and reviewed by at least one other developer before being merged into <code>main</code>.</li> </ul>"},{"location":"features/ble.html","title":"Bluetooth Low Energy (BLE) Configuration","text":"<p>The Yeti Gateway supports configuration over Bluetooth Low Energy (BLE), providing a convenient way to set up the device without requiring initial network connectivity.</p>"},{"location":"features/ble.html#overview","title":"Overview","text":"<p>The gateway hosts a BLE GATT (Generic Attribute Profile) server that exposes services and characteristics for reading and writing configuration parameters. This allows a mobile application or other BLE central device to connect and provision the gateway.</p>"},{"location":"features/ble.html#gatt-services","title":"GATT Services","text":"<p>The BLE service is organized into two main profiles: Settings and Sensor.</p>"},{"location":"features/ble.html#settings-profile","title":"Settings Profile","text":"<p>This profile is used to configure the various communication and network interfaces of the gateway.</p> <ul> <li>Service UUID: <code>0x00FF</code></li> </ul>"},{"location":"features/ble.html#characteristics","title":"Characteristics","text":"Characteristic Name UUID Properties Description WiFi Settings <code>0xFF01</code> Write Configure WiFi SSID, password, and static IP. Ethernet Settings <code>0xFF02</code> Write Configure Ethernet static IP settings. MQTT Settings <code>0xFF03</code> Write Set up the MQTT broker connection parameters. Modbus RTU Settings <code>0xFF04</code> Write Configure Modbus RTU serial parameters. Modbus TCP Settings <code>0xFF05</code> Write Configure Modbus TCP connection parameters. Modbus Device/Register <code>0xFF06</code> Write Configure Modbus slave devices and registers."},{"location":"features/ble.html#sensor-profile","title":"Sensor Profile","text":"<p>This profile is used for monitoring internal device status.</p> <ul> <li>Service UUID: <code>0xFF07</code></li> </ul>"},{"location":"features/ble.html#characteristics_1","title":"Characteristics","text":"Characteristic Name UUID Properties Description Test Sensor <code>0xFF08</code> Read, Indicate A test characteristic for sensor data."},{"location":"features/ble.html#data-transfer-protocol","title":"Data Transfer Protocol","text":"<p>Due to the limited size of BLE packets (MTU), a chunking protocol is used to transfer larger JSON configuration payloads.</p>"},{"location":"features/ble.html#packet-structure","title":"Packet Structure","text":"<p>Each write operation to a characteristic consists of a packet with the following header:</p> Index Size (bytes) Description 0-1 2 Handle ID 2 1 Total Chunks 3 1 Current Chunk # 4-5 2 Data Length 6+ n Payload Data"},{"location":"features/ble.html#workflow","title":"Workflow","text":"<ol> <li>Connect: A BLE central device connects to the Yeti Gateway.</li> <li>Discover: The central discovers the services and characteristics.</li> <li>Prepare Data: The central prepares a JSON payload for the desired configuration (e.g., WiFi settings).</li> <li>Chunk &amp; Send: The central splits the JSON payload into multiple chunks, adds the header to each chunk, and writes them sequentially to the appropriate characteristic.</li> <li>Reassembly: The gateway receives the chunks, validates their order, and reassembles the complete JSON payload.</li> <li>Process: Once all chunks are received, the gateway parses the JSON and applies the new settings.</li> <li>Feedback: The onboard buzzer provides audible feedback (<code>BUZZER_SOUND_SUCCESS</code> or <code>BUZZER_SOUND_ERROR</code>) to indicate the result of the operation.</li> </ol>"}]}